import{u as e,b as r}from"./_chunks/constants-BZ2GbOYw.js";function n(n){const{draftMode:t,origin:a=("undefined"==typeof location?"https://localhost":location.origin)}=n;let{preview:o="/"}=n;const i=new URL(o,a),s=t.enable?new URL(t.enable,a):void 0;return async n=>{try{if(n.previewSearchParam){const e=new URL(n.previewSearchParam,i);e.origin===i.origin&&(o=`${e.pathname}${e.search}`)}else if(n.referrer){const e=new URL(n.referrer);e.origin===i.origin&&(o=`${e.pathname}${e.search}`)}}catch{}const t=new URL(o,i);if(s){const a=new URL(s),{searchParams:o}=a;return o.set(e,n.previewUrlSecret),t.pathname!==a.pathname&&o.set(r,`${t.pathname}${t.search}`),a.toString()}return t.toString()}}export{n as definePreviewUrl};//# sourceMappingURL=define-preview-url.js.map
