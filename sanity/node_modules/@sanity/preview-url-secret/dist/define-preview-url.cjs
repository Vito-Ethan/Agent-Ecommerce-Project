"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/constants-Q2W1tUXO.cjs");exports.definePreviewUrl=function(r){const{draftMode:n,origin:t=("undefined"==typeof location?"https://localhost":location.origin)}=r;let{preview:a="/"}=r;const i=new URL(a,t),o=n.enable?new URL(n.enable,t):void 0;return async r=>{try{if(r.previewSearchParam){const e=new URL(r.previewSearchParam,i);e.origin===i.origin&&(a=`${e.pathname}${e.search}`)}else if(r.referrer){const e=new URL(r.referrer);e.origin===i.origin&&(a=`${e.pathname}${e.search}`)}}catch{}const n=new URL(a,i);if(o){const t=new URL(o),{searchParams:a}=t;return a.set(e.u,r.previewUrlSecret),n.pathname!==t.pathname&&a.set(e.b,`${n.pathname}${n.search}`),t.toString()}return n.toString()}};//# sourceMappingURL=define-preview-url.cjs.map
